# [í˜‘ì¡° ìš”ì²­] ì¸ì¦ íë¦„ êµ¬í˜„ - í”„ë¡ íŠ¸ì—”ë“œ ì„¼í„°

---

**ë°œì‹ **: ë°±ì—”ë“œ ì„¼í„°  
**ìˆ˜ì‹ **: í”„ë¡ íŠ¸ì—”ë“œ ì„¼í„°  
**ë‚ ì§œ**: 2026-01-31  
**ê¸´ê¸‰ë„**: ğŸ”´ ë†’ìŒ  

---

## 1. ë°°ê²½

ë°±ì—”ë“œ ì„¼í„°ì—ì„œ API ë¼ìš°íŒ… ë¬¸ì œë¥¼ í•´ê²°í–ˆìŠµë‹ˆë‹¤ (**PR #4**).

### í•´ê²°ëœ ë¬¸ì œ
- âœ… ëª¨ë“  `/api/*` ì—”ë“œí¬ì¸íŠ¸ 404 â†’ **ì •ìƒ ë™ì‘**
- âœ… `/api/auth/login` ë¡œê·¸ì¸ API â†’ **ì •ìƒ ë™ì‘**
- âœ… `/api/dashboard` ë“± ë°ì´í„° API â†’ **ì •ìƒ ë™ì‘**

### ë‚¨ì€ ë¬¸ì œ (í”„ë¡ íŠ¸ì—”ë“œ ë‹´ë‹¹)
- âŒ ë£¨íŠ¸(`/`) ì ‘ì† ì‹œ ë¡œê·¸ì¸ í˜ì´ì§€ê°€ ì•„ë‹Œ ëŒ€ì‹œë³´ë“œë¡œ ì´ë™
- âŒ ë¯¸ì¸ì¦ ì‚¬ìš©ìê°€ ëª¨ë“  í˜ì´ì§€ì— ì ‘ê·¼ ê°€ëŠ¥

---

## 2. í˜„ì¬ ë¬¸ì œ ìƒí™©

### ë¬¸ì œ 1: ì˜ëª»ëœ ë¦¬ë‹¤ì´ë ‰íŠ¸

**í˜„ì¬ ë™ì‘**:
```
ì‚¬ìš©ì â†’ / ì ‘ì† â†’ /dashboard ë¦¬ë‹¤ì´ë ‰íŠ¸ (ì¸ì¦ ì²´í¬ ì—†ìŒ)
```

**ì›ì¸ ì½”ë“œ** (`frontend/next.config.js`):
```javascript
async redirects() {
  return [
    {
      source: '/',
      destination: '/dashboard',  // âŒ ë¬´ì¡°ê±´ ëŒ€ì‹œë³´ë“œë¡œ ì´ë™
      permanent: false,
    },
  ]
}
```

### ë¬¸ì œ 2: ì¸ì¦ ë¯¸ë“¤ì›¨ì–´ ë¶€ì¬

**í˜„ì¬ ë™ì‘**:
```
ë¯¸ì¸ì¦ ì‚¬ìš©ì â†’ /dashboard ì§ì ‘ ì ‘ì† â†’ í˜ì´ì§€ í‘œì‹œë¨ (ë°ì´í„°ë§Œ ì—†ìŒ)
```

**ê¸°ëŒ€ ë™ì‘**:
```
ë¯¸ì¸ì¦ ì‚¬ìš©ì â†’ /dashboard ì§ì ‘ ì ‘ì† â†’ /login ë¦¬ë‹¤ì´ë ‰íŠ¸
```

---

## 3. ìš”ì²­ ì‚¬í•­

### 3-1. `next.config.js` ìˆ˜ì •

**ë³€ê²½ ì „**:
```javascript
async redirects() {
  return [
    {
      source: '/',
      destination: '/dashboard',
      permanent: false,
    },
  ]
}
```

**ë³€ê²½ í›„**:
```javascript
async redirects() {
  return [
    {
      source: '/',
      destination: '/login',  // âœ… ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë³€ê²½
      permanent: false,
    },
  ]
}
```

### 3-2. `frontend/middleware.ts` ìƒì„± (ì‹ ê·œ)

```typescript
// frontend/middleware.ts
import { NextResponse } from 'next/server'
import type { NextRequest } from 'next/server'

// ì¸ì¦ì´ í•„ìš” ì—†ëŠ” ê²½ë¡œ
const PUBLIC_PATHS = ['/login', '/api/auth/login', '/api/auth/status']

export function middleware(request: NextRequest) {
  const { pathname } = request.nextUrl
  
  // Public ê²½ë¡œëŠ” í†µê³¼
  if (PUBLIC_PATHS.some(path => pathname.startsWith(path))) {
    return NextResponse.next()
  }
  
  // API ê²½ë¡œëŠ” APIì—ì„œ ìì²´ ì¸ì¦ ì²˜ë¦¬
  if (pathname.startsWith('/api/')) {
    return NextResponse.next()
  }
  
  // ì„¸ì…˜ í† í° í™•ì¸
  const sessionToken = request.cookies.get('session_token')?.value
  
  // í† í°ì´ ì—†ìœ¼ë©´ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
  if (!sessionToken) {
    const loginUrl = new URL('/login', request.url)
    loginUrl.searchParams.set('redirect', pathname)
    return NextResponse.redirect(loginUrl)
  }
  
  return NextResponse.next()
}

export const config = {
  matcher: [
    /*
     * Match all request paths except:
     * - _next/static (static files)
     * - _next/image (image optimization files)
     * - favicon.ico (favicon file)
     * - public files (public folder)
     */
    '/((?!_next/static|_next/image|favicon.ico|images/).*)',
  ],
}
```

### 3-3. ë¡œê·¸ì¸ ì„±ê³µ í›„ ë¦¬ë‹¤ì´ë ‰íŠ¸ ê°œì„  (ì„ íƒ)

`frontend/app/login/page.tsx` ìˆ˜ì •:

```typescript
// í˜„ì¬
router.push('/')

// ê°œì„  (redirect íŒŒë¼ë¯¸í„° í™œìš©)
const searchParams = useSearchParams()
const redirect = searchParams.get('redirect') || '/dashboard'
router.push(redirect)
```

---

## 4. ì˜ˆìƒ ê²°ê³¼

### ë³€ê²½ í›„ ì‚¬ìš©ì íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì‹œë‚˜ë¦¬ì˜¤ 1: ë¯¸ì¸ì¦ ì‚¬ìš©ì                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì‚¬ìš©ì â†’ / ì ‘ì†                                               â”‚
â”‚        â†’ /login ë¦¬ë‹¤ì´ë ‰íŠ¸ (next.config.js)                   â”‚
â”‚        â†’ ë¡œê·¸ì¸ í˜ì´ì§€ í‘œì‹œ                                    â”‚
â”‚        â†’ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ (ridilegal)                            â”‚
â”‚        â†’ /api/auth/login í˜¸ì¶œ                                â”‚
â”‚        â†’ ì¿ í‚¤ ì„¤ì • (session_token)                           â”‚
â”‚        â†’ /dashboard ë¦¬ë‹¤ì´ë ‰íŠ¸                                â”‚
â”‚        â†’ ëŒ€ì‹œë³´ë“œ í‘œì‹œ âœ…                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì‹œë‚˜ë¦¬ì˜¤ 2: ë¯¸ì¸ì¦ ì‚¬ìš©ì - ì§ì ‘ URL ì ‘ê·¼                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì‚¬ìš©ì â†’ /dashboard ì§ì ‘ ì ‘ì†                                 â”‚
â”‚        â†’ middleware.ts ì¸ì¦ ì²´í¬                             â”‚
â”‚        â†’ ì¿ í‚¤ ì—†ìŒ ê°ì§€                                       â”‚
â”‚        â†’ /login?redirect=/dashboard ë¦¬ë‹¤ì´ë ‰íŠ¸               â”‚
â”‚        â†’ ë¡œê·¸ì¸ í›„ /dashboardë¡œ ë³µê·€                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì‹œë‚˜ë¦¬ì˜¤ 3: ì¸ì¦ëœ ì‚¬ìš©ì                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì‚¬ìš©ì â†’ /sessions ì ‘ì†                                       â”‚
â”‚        â†’ middleware.ts ì¸ì¦ ì²´í¬                             â”‚
â”‚        â†’ ì¿ í‚¤ ìˆìŒ í™•ì¸                                       â”‚
â”‚        â†’ í˜ì´ì§€ í‘œì‹œ âœ…                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. íŒŒì¼ ë³€ê²½ ìš”ì•½

| íŒŒì¼ | ì‘ì—… | ì„¤ëª… |
|------|------|------|
| `frontend/next.config.js` | ìˆ˜ì • | `/ â†’ /login` ë¦¬ë‹¤ì´ë ‰íŠ¸ |
| `frontend/middleware.ts` | ì‹ ê·œ | ì¸ì¦ ë¯¸ë“¤ì›¨ì–´ |
| `frontend/app/login/page.tsx` | ìˆ˜ì • (ì„ íƒ) | redirect íŒŒë¼ë¯¸í„° ì²˜ë¦¬ |

---

## 6. í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

ë°°í¬ í›„ ë‹¤ìŒ í•­ëª©ì„ í™•ì¸í•´ì£¼ì„¸ìš”:

- [ ] `/` ì ‘ì† ì‹œ `/login`ìœ¼ë¡œ ì´ë™
- [ ] `/login`ì—ì„œ `ridilegal` ì…ë ¥ ì‹œ ë¡œê·¸ì¸ ì„±ê³µ
- [ ] ë¡œê·¸ì¸ í›„ `/dashboard`ë¡œ ì´ë™
- [ ] ë¡œê·¸ì•„ì›ƒ í›„ `/dashboard` ì§ì ‘ ì ‘ì† ì‹œ `/login`ìœ¼ë¡œ ì´ë™
- [ ] ëŒ€ì‹œë³´ë“œì— ë°ì´í„° ì •ìƒ í‘œì‹œ

---

## 7. ê´€ë ¨ PR

- **ë°±ì—”ë“œ PR #4**: [fix(api): API ë¼ìš°íŒ… ìˆ˜ì •](https://github.com/TooR-oN/Jobdori/pull/4)
  - API 404 ë¬¸ì œ í•´ê²°
  - `frontend/app/api/[[...path]]/route.ts` ìƒì„±
  - `vercel.json` ìˆ˜ì •

---

## 8. ë¬¸ì˜

ë°±ì—”ë“œ ê´€ë ¨ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ë°±ì—”ë“œ ì„¼í„°ë¡œ ì—°ë½ ë¶€íƒë“œë¦½ë‹ˆë‹¤.

ê°ì‚¬í•©ë‹ˆë‹¤.

**ë°±ì—”ë“œ ì„¼í„°**
